<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Batandball using Functions</title>
</head>

<body>
  <h1 id="heading"></h1>
  <h1 id="heading2"></h1>
  <button onclick="
    let computerChoice= generateComputerChoice();
    let resultMsg = getResult('bat',computerChoice);
    document.querySelector('#heading').innerHTML = `You chose to bat and computer choose ${computerChoice}`;
    showResult('bat',computerChoice,resultMsg);
  ">Bat</button>

  <button onclick="    
    computerChoice = generateComputerChoice();
    resultMsg = getResult('ball',computerChoice);
    document.querySelector('#heading').innerHTML = `You chose to ball and computer choose ${computerChoice}`;
    showResult('ball',computerChoice,resultMsg);
    

    
    
    ">Ball</button>


  <button onclick="    
  computerChoice = generateComputerChoice();
  resultMsg = getResult('stump',computerChoice);
  document.querySelector('#heading').innerHTML = `You chose to stump and computer choose ${computerChoice}`;
  showResult('stump',computerChoice,resultMsg);
  
  ">Stumps</button>

  <button onclick="localStorage.clear()
  resetScore();">reset</button>



  <script>
    let scoreStr = localStorage.getItem('score');
    let score;
    resetScore(scoreStr);

    function resetScore(scoreStr) {

      score = scoreStr ?  JSON.parse(scoreStr) : {

        win: 0,
        lost: 0,
        tie: 0,



      };


      score.displayScore = function () {
        return ` won:${score.win},lost:${score.lost},tie:${score.tie}`;

      }

    }





    function generateComputerChoice() {
      let randomChoice = Math.random() * 3;
      if (randomChoice > 0 && randomChoice <= 1) {
        return 'bat';
      } else if (randomChoice > 1 && randomChoice <= 2) {
        return 'ball';
      } else {
        return 'stump';
      }

    }

    function getResult(userMove, ComputerMove) {
      if (userMove == 'bat' && ComputerMove == 'bat') {
        score.tie++;
        return `it's a tie`;
      }
      else if (userMove == 'bat' && ComputerMove == 'ball') {
        score.win++;
        return `user has won`;
      }
      else if (userMove == 'bat' && ComputerMove == 'stump') {
        score.lost++;
        return `computer has won`;
      }
      else if (userMove == 'ball' && ComputerMove == 'ball') {
        score.tie++;
        return `it's a tie`;
      }
      else if (userMove == 'ball' && ComputerMove == 'stump') {
        score.win++;
        return `user has won`;
      }
      else if (userMove == 'ball' && ComputerMove == 'bat') {
        score.lost++;
        return `computer has won`;
      }
      else if (userMove == 'stump' && ComputerMove == 'stump') {
        score.tie++;
        return `it's a tie`;
      }
      else if (userMove == 'stump' && ComputerMove == 'ball') {
        score.win++;
        return `user has won`;
      }
      else if (userMove == 'stump' && ComputerMove == 'bat') {
        score.lost++;
        return `computer has won`;
      }
    }


    function showResult(userMove, ComputerMove, result) {
      localStorage.setItem('score', JSON.stringify(score));
      alert(`you have chosen ${userMove}. computer choice is $     {ComputerMove}  
      ${result}
      ${displayScore()}
      
      
      `);
    }


  </script>
</body>

</html>
</body>

</html>